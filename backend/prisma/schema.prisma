generator client {
  provider = "prisma-client"
  engineType = "client" 
  output = "../src/generated/prisma"
}

datasource db {
  provider  = "postgresql"
}
        
enum Gender {
  Male
  Female
  Other
}

enum CustomerRegion {
  East
  West
  North
  South
  Central
}

enum CustomerType {
  Returning
  Loyal
  New
}

model Customer {
  customerId       String      @id 
  customerName     String   
  phoneNumber      String
  gender           Gender
  age              Int
  customerRegion   CustomerRegion
  customerType     CustomerType

  transactions  Transaction[]

  @@index([gender])
  @@index([customerRegion])
  @@index([age])
  @@index([phoneNumber])
  @@index([customerName], type: Brin)
  @@index([gender, customerRegion, age])
}

model Product {
  productId        String      @id 
  productName      String   
  brand            String
  productCategory  String
  tags             String[]

  transactions  Transaction[]

  @@index([productCategory])
  @@index([tags], type: Gin)
}

enum OrderStatus {
  Pending
  Cancelled
  Returned
  Completed
}


model Transaction {
  transactionId    BigInt    @id
  customerId       String
  customer         Customer  @relation(fields: [customerId], references: [customerId])
  
  productId        String
  product          Product   @relation(fields: [productId], references: [productId])
  
  quantity         Int
  pricePerUnit     Float
  discountPercent  Float
  totalAmount      Float
  finalAmount      Float
  
  date             DateTime
  paymentMethod    String
  orderStatus      OrderStatus
  deliveryType     String 
  storeId          String
  storeLocation    String
  salespersonId    String
  employeeName     String

  @@index([customerId])
  @@index([productId])
  @@index([storeId])
  @@index([date])
  @@index([paymentMethod])
  @@index([paymentMethod, date])
  @@index([date, paymentMethod, customerId])
}
